(function(a){a.fn.navList=function(){var c=a(this);return $a=c.find('a'),b=[],$a.each(function(){var d=a(this),e=Math.max(0,d.parents('li').length-1),f=d.attr('href'),g=d.attr('target');b.push('<a class="link depth-'+e+'"'+('undefined'!=typeof g&&''!=g?' target="'+g+'"':'')+('undefined'!=typeof f&&''!=f?' href="'+f+'"':'')+'><span class="indent-'+e+'"></span>'+d.text()+'</a>')}),b.join('')},a.fn.panel=function(c){if(0==this.length)return e;if(1<this.length){for(var d=0;d<this.length;d++)a(this[d]).panel(c);return e}var j,e=a(this),f=a('body'),g=a(window),h=e.attr('id');return j=a.extend({delay:0,hideOnClick:!1,hideOnEscape:!1,hideOnSwipe:!1,resetScroll:!1,resetForms:!1,side:null,target:e,visibleClass:'visible'},c),'jQuery'!=typeof j.target&&(j.target=a(j.target)),e._hide=function(k){j.target.hasClass(j.visibleClass)&&(k&&(k.preventDefault(),k.stopPropagation()),j.target.removeClass(j.visibleClass),window.setTimeout(function(){j.resetScroll&&e.scrollTop(0),j.resetForms&&e.find('form').each(function(){this.reset()})},j.delay))},e.css('-ms-overflow-style','-ms-autohiding-scrollbar').css('-webkit-overflow-scrolling','touch'),j.hideOnClick&&(e.find('a').css('-webkit-tap-highlight-color','rgba(0,0,0,0)'),e.on('click','a',function(k){var l=a(this),m=l.attr('href'),n=l.attr('target');m&&'#'!=m&&''!=m&&m!='#'+h&&(k.preventDefault(),k.stopPropagation(),e._hide(),window.setTimeout(function(){'_blank'==n?window.open(m):window.location.href=m},j.delay+10))})),e.on('touchstart',function(k){e.touchPosX=k.originalEvent.touches[0].pageX,e.touchPosY=k.originalEvent.touches[0].pageY}),e.on('touchmove',function(k){if(null!==e.touchPosX&&null!==e.touchPosY){var l=e.touchPosX-k.originalEvent.touches[0].pageX,m=e.touchPosY-k.originalEvent.touches[0].pageY,n=e.outerHeight(),o=e.get(0).scrollHeight-e.scrollTop();if(j.hideOnSwipe){var p=!1,q=20,r=50;switch(j.side){case'left':p=m<q&&m>-1*q&&l>r;break;case'right':p=m<q&&m>-1*q&&l<-1*r;break;case'top':p=l<q&&l>-1*q&&m>r;break;case'bottom':p=l<q&&l>-1*q&&m<-1*r;break;default:}if(p)return e.touchPosX=null,e.touchPosY=null,e._hide(),!1}(0>e.scrollTop()&&0>m||o>n-2&&o<n+2&&0<m)&&(k.preventDefault(),k.stopPropagation())}}),e.on('click touchend touchstart touchmove',function(k){k.stopPropagation()}),e.on('click','a[href="#'+h+'"]',function(k){k.preventDefault(),k.stopPropagation(),j.target.removeClass(j.visibleClass)}),f.on('click touchend',function(k){e._hide(k)}),f.on('click','a[href="#'+h+'"]',function(k){k.preventDefault(),k.stopPropagation(),j.target.toggleClass(j.visibleClass)}),j.hideOnEscape&&g.on('keydown',function(k){27==k.keyCode&&e._hide(k)}),e},a.fn.placeholder=function(){if('undefined'!=typeof document.createElement('input').placeholder)return a(this);if(0==this.length)return d;if(1<this.length){for(var c=0;c<this.length;c++)a(this[c]).placeholder();return d}var d=a(this);return d.find('input[type=text],textarea').each(function(){var e=a(this);(''==e.val()||e.val()==e.attr('placeholder'))&&e.addClass('polyfill-placeholder').val(e.attr('placeholder'))}).on('blur',function(){var e=a(this);e.attr('name').match(/-polyfill-field$/)||''==e.val()&&e.addClass('polyfill-placeholder').val(e.attr('placeholder'))}).on('focus',function(){var e=a(this);e.attr('name').match(/-polyfill-field$/)||e.val()==e.attr('placeholder')&&e.removeClass('polyfill-placeholder').val('')}),d.find('input[type=password]').each(function(){var e=a(this),f=a(a('<div>').append(e.clone()).remove().html().replace(/type="password"/i,'type="text"').replace(/type=password/i,'type=text'));''!=e.attr('id')&&f.attr('id',e.attr('id')+'-polyfill-field'),''!=e.attr('name')&&f.attr('name',e.attr('name')+'-polyfill-field'),f.addClass('polyfill-placeholder').val(f.attr('placeholder')).insertAfter(e),''==e.val()?e.hide():f.hide(),e.on('blur',function(g){g.preventDefault();var h=e.parent().find('input[name='+e.attr('name')+'-polyfill-field]');''==e.val()&&(e.hide(),h.show())}),f.on('focus',function(g){g.preventDefault();var h=f.parent().find('input[name='+f.attr('name').replace('-polyfill-field','')+']');f.hide(),h.show().focus()}).on('keypress',function(g){g.preventDefault(),f.val('')})}),d.on('submit',function(){d.find('input[type=text],input[type=password],textarea').each(function(){var f=a(this);f.attr('name').match(/-polyfill-field$/)&&f.attr('name',''),f.val()==f.attr('placeholder')&&(f.removeClass('polyfill-placeholder'),f.val(''))})}).on('reset',function(e){e.preventDefault(),d.find('select').val(a('option:first').val()),d.find('input,textarea').each(function(){var g,f=a(this);switch(f.removeClass('polyfill-placeholder'),this.type){case'submit':case'reset':break;case'password':f.val(f.attr('defaultValue')),g=f.parent().find('input[name='+f.attr('name')+'-polyfill-field]'),''==f.val()?(f.hide(),g.show()):(f.show(),g.hide());break;case'checkbox':case'radio':f.attr('checked',f.attr('defaultValue'));break;case'text':case'textarea':f.val(f.attr('defaultValue')),''==f.val()&&(f.addClass('polyfill-placeholder'),f.val(f.attr('placeholder')));break;default:f.val(f.attr('defaultValue'));}})}),d},a.prioritize=function(c,d){var e='__prioritize';'jQuery'!=typeof c&&(c=a(c)),c.each(function(){var g,f=a(this),h=f.parent();if(0!=h.length)if(!f.data(e)){if(!d)return;if(g=f.prev(),0==g.length)return;f.prependTo(h),f.data(e,g)}else{if(d)return;g=f.data(e),f.insertAfter(g),f.removeData(e)}})}})(jQuery);
